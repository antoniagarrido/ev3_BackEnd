{% extends 'base.html' %}

{% block content %}
<div class="card">
  <table>
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Imagen</th> <th>Descripci√≥n</th>
        <th>Precio</th>
        <th>Stock</th>
        {% if user.is_staff %}
        <th>Acciones</th>
        {% endif %}
      </tr>
    </thead>
    <tbody>
      {% for producto in page_obj %}
      <tr>
        <td>{{ producto.nombre }}</td>
        
        <td>
          {% if producto.imagen %}
            <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
          {% else %}
            <span style="display: inline-block; width: 60px; height: 60px; background: #eee; border-radius: 8px;"></span>
          {% endif %}
        </td>
        <td>{{ producto.descripcion|truncatewords:10 }}</td>
        <td>${{ producto.precio }}</td>
        <td>{{ producto.stock }}</td>
        {% if user.is_staff %}
        <td>
          <a href="{% url 'producto_edit' producto.pk %}" class="btn">Editar</a>
          <a href="{% url 'producto_delete' producto.pk %}" class="btn">Eliminar</a>
        </td>
        {% endif %}
      </tr>
      {% empty %}
      <td colspan="6">No hay productos registrados.</td>
      {% endfor %}
    </tbody>
  </table>

  {% include 'paginator.html' %}
</div>
{% endblock %}